<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>防抖函数</title>
  </head>
  <body>
    <input type="text" id="input" />

    <script>
      var input = document.getElementById("input");
      // 防抖函数
      // function debounce(delay, value) {
      //   let timer;
      //   clearTimeout(timer);
      //   /*
      //     我们想清除的是setTimeout，我们应该存储这个timer的变量
      //     timer变量需要一直保存在内存当中
      //     既然你不想打印之前已经输入的结果，清除以前触发的定时器
      //     我们应该存储这个timer的变量
      //     一直要在内存中，内存的泄露，闭包
      //   */
      //   timer = setTimeout(function() {
      //     console.log(value);
      //   }, delay)
      // }

      // function debounce(delay, callback) {
      //   let timer;
      //   return function (value) {
      //     clearTimeout(timer);
      //     /*
      //       我们想清除的是setTimeout，我们应该存储这个timer的变量
      //       timer变量需要一直保存在内存当中
      //       既然你不想打印之前已经输入的结果，清除以前触发的定时器
      //       我们应该存储这个timer的变量
      //       一直要在内存中，内存的泄露，闭包
      //     */
      //     timer = setTimeout(function () {
      //       callback(value);
      //     }, delay);
      //   };
      // }


      // function fn(value) {
      //   console.log(value);
      // }
      // var debounceFunc = debounce(1000, fn); //debounceFunc 是debounce函数return的function(value) {...}
      // input.addEventListener("keyup", function (e) {
      //   debounceFunc(e.target.value);
      // });

      //A higher order function is a function that takes a function as an argument, or returns a function.
      function debounce(delay, callback){
        let timer;
        return function(value) {
          clearTimeout(timer);
          timer = setTimeout(function() {
            callback(value)
          }, delay)
        }
      }

      function fn(value){
        console.log(value);
      }

      var debounceFunc = debounce(1000, fn);

      var input = document.getElementById('input');
      input.addEventListener('keyup', function(e) {
        debounceFunc(e.target.value);
      });

    </script>
  </body>
</html>
