# js的作用域

## 作用域说明： 一般理解指一个变量的作用范围

1. 全局作用域:
   - 全局作用域在页面打开时被创建，页面关闭时被销毁
   - 编写script标签中的变量和函数，作用域为全局，在页面的任意位置都能访问到
   - 在全局作用域中，全局对象为window，代表一个浏览器窗口，由浏览器创建，可直接调用
   - 全局作用域中，声明的变量和函数会作为window对象的属性和方法
2. 函数作用域
   - 调用函数时，函数作用域被创建，函数执行完毕，函数作用域被销毁
   - 每调用一次函数，就会创建一个新的函数作用域，他们之间是互相独立的
   - 在函数作用域中，可访问到全局作用域的变量，在函数外无法访问到函数作用域内的变量
   - 在函数作用域中访问变量、函数时，会先在自身作用域中寻找，若没有找到，则会到函数的上一级作用域中寻找，一直到全局作用域


## 作用域的深层次理解

+ 执行期的上下文
  - 当**函数代码执行**的前期，会创建一个**执行期上下文**的内部对象 AO (作用域)
  - 这个内部的对象是预编译的时候创建出来的，因为当函数被调用的时候，会先进行预编译
  - 在全局代码执行的前期会创建一个执行期的上下文的对象GO

## 函数作用域预编译

1. 创建AO对象 AO{}
2. 找形参和变量声明，将变量和形参名作为AO对象的属性名，值为undefined
3. 实参形参相统一
4. 在函数体中找函数声明，赋值给函数体

## 全局作用域的预编译

1. 创建GO对象
2. 找变量声明，将变量名作为GO对象的属性名，值为undefined
3. 找函数声明，值赋值给函数体


+ 作用域链
  - 会被保存到一个隐式的属性[[scope]]中，这个属性是我们用户访问不到的，但是的确是存在的，仅js引擎来访问的，里面存储的是作用域链